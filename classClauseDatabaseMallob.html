<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.12.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painless: ClauseDatabaseMallob Class Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <link rel="icon" type="image/png" href="p-logo.png"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/javascript" src="darkmode_toggle.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectlogo"><a href=index.html><img alt="Logo" src="p-logo.png" /></a></td>
              <td id="projectalign">
                <div id="projectname">Painless
                </div>
                <div id="projectbrief">A framework to ease parallelization of sequential CDCL SAT solvers</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classClauseDatabaseMallob-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ClauseDatabaseMallob Class Reference<div class="ingroups"><a class="el" href="group__pl__containers.html">Painless Containers Classes</a> &raquo; <a class="el" href="group__pl__containers__db.html">Clause Databases</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A clause database implementation attempting to naively mimic the Simplified Adaptive Database from Mallob (ref:https://doi.org/10.1613/jair.1.15827).  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ClauseDatabaseMallob_8hpp_source.html">ClauseDatabaseMallob.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ClauseDatabaseMallob:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classClauseDatabaseMallob__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Collaboration diagram for ClauseDatabaseMallob:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classClauseDatabaseMallob__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa4d3073ea4c441b55e38e99bbedf10f7" id="r_aa4d3073ea4c441b55e38e99bbedf10f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4d3073ea4c441b55e38e99bbedf10f7">ClauseDatabaseMallob</a> (int maxClauseSize, int maxPartitioningLbd, size_t maxCapacity, int maxFreeSize)</td></tr>
<tr class="memdesc:aa4d3073ea4c441b55e38e99bbedf10f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new <a class="el" href="classClauseDatabaseMallob.html" title="A clause database implementation attempting to naively mimic the Simplified Adaptive Database from Ma...">ClauseDatabaseMallob</a> object.  <br /></td></tr>
<tr class="separator:aa4d3073ea4c441b55e38e99bbedf10f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3811c7fb64b8d516d80fd831a396dd0e" id="r_a3811c7fb64b8d516d80fd831a396dd0e"><td class="memItemLeft" align="right" valign="top"><a id="a3811c7fb64b8d516d80fd831a396dd0e" name="a3811c7fb64b8d516d80fd831a396dd0e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~ClauseDatabaseMallob</b> () override</td></tr>
<tr class="memdesc:a3811c7fb64b8d516d80fd831a396dd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor. <br /></td></tr>
<tr class="separator:a3811c7fb64b8d516d80fd831a396dd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4327df1c5f91889d5881d5834eee563e" id="r_a4327df1c5f91889d5881d5834eee563e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4327df1c5f91889d5881d5834eee563e">addClause</a> (ClauseExchangePtr clause) override</td></tr>
<tr class="memdesc:a4327df1c5f91889d5881d5834eee563e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a clause to the database.  <br /></td></tr>
<tr class="separator:a4327df1c5f91889d5881d5834eee563e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6130cd4e93a88c641163bc52f2b8d9b" id="r_aa6130cd4e93a88c641163bc52f2b8d9b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6130cd4e93a88c641163bc52f2b8d9b">giveSelection</a> (std::vector&lt; ClauseExchangePtr &gt; &amp;selectedCls, unsigned int literalCountLimit) override</td></tr>
<tr class="memdesc:aa6130cd4e93a88c641163bc52f2b8d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills a buffer with selected clauses up to a given size limit.  <br /></td></tr>
<tr class="separator:aa6130cd4e93a88c641163bc52f2b8d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a220775dedc397f17bd7a29a8b10b8e62" id="r_a220775dedc397f17bd7a29a8b10b8e62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a220775dedc397f17bd7a29a8b10b8e62">getClauses</a> (std::vector&lt; ClauseExchangePtr &gt; &amp;v_cls) override</td></tr>
<tr class="memdesc:a220775dedc397f17bd7a29a8b10b8e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills a buffer with all clauses in the database.  <br /></td></tr>
<tr class="separator:a220775dedc397f17bd7a29a8b10b8e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f550c70b621abd473d9721107d2f709" id="r_a8f550c70b621abd473d9721107d2f709"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f550c70b621abd473d9721107d2f709">getOneClause</a> (ClauseExchangePtr &amp;cls) override</td></tr>
<tr class="memdesc:a8f550c70b621abd473d9721107d2f709"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a single clause from the best (smallest index) buffer possible.  <br /></td></tr>
<tr class="separator:a8f550c70b621abd473d9721107d2f709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1807f4379bd4fbf9853ec56b0ff6d369" id="r_a1807f4379bd4fbf9853ec56b0ff6d369"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1807f4379bd4fbf9853ec56b0ff6d369">getSize</a> () const override</td></tr>
<tr class="memdesc:a1807f4379bd4fbf9853ec56b0ff6d369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the total number of clauses in the database.  <br /></td></tr>
<tr class="separator:a1807f4379bd4fbf9853ec56b0ff6d369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e2b3de1c79cd19881545a6465ab23eb" id="r_a1e2b3de1c79cd19881545a6465ab23eb"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e2b3de1c79cd19881545a6465ab23eb">shrinkDatabase</a> () override</td></tr>
<tr class="memdesc:a1e2b3de1c79cd19881545a6465ab23eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shrinks the database by removing clauses to maintain the size within capacity.  <br /></td></tr>
<tr class="separator:a1e2b3de1c79cd19881545a6465ab23eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d180394878ab39c7c79f55e8b785db" id="r_af8d180394878ab39c7c79f55e8b785db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8d180394878ab39c7c79f55e8b785db">clearDatabase</a> () override</td></tr>
<tr class="memdesc:af8d180394878ab39c7c79f55e8b785db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears all clauses from the database and resets internal counters.  <br /></td></tr>
<tr class="separator:af8d180394878ab39c7c79f55e8b785db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classClauseDatabase"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classClauseDatabase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classClauseDatabase.html">ClauseDatabase</a></td></tr>
<tr class="memitem:a58682b8221e4787424ad005e987eeb42 inherit pub_methods_classClauseDatabase" id="r_a58682b8221e4787424ad005e987eeb42"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>ClauseDatabase</b> ()</td></tr>
<tr class="memdesc:a58682b8221e4787424ad005e987eeb42 inherit pub_methods_classClauseDatabase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Constructor. <br /></td></tr>
<tr class="separator:a58682b8221e4787424ad005e987eeb42 inherit pub_methods_classClauseDatabase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae6424d414d8116cdd0d231af3193dc inherit pub_methods_classClauseDatabase" id="r_a6ae6424d414d8116cdd0d231af3193dc"><td class="memItemLeft" align="right" valign="top">
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~ClauseDatabase</b> ()</td></tr>
<tr class="memdesc:a6ae6424d414d8116cdd0d231af3193dc inherit pub_methods_classClauseDatabase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor to ensure proper cleanup of derived classes. <br /></td></tr>
<tr class="separator:a6ae6424d414d8116cdd0d231af3193dc inherit pub_methods_classClauseDatabase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5c07a43ccb333e766331e4d17ac00c24" id="r_a5c07a43ccb333e766331e4d17ac00c24"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c07a43ccb333e766331e4d17ac00c24">getIndex</a> (int size, int lbd) const</td></tr>
<tr class="memdesc:a5c07a43ccb333e766331e4d17ac00c24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the index for a clause based on its size and LBD.  <br /></td></tr>
<tr class="separator:a5c07a43ccb333e766331e4d17ac00c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dc59fb217655f117354d5996afb0955" id="r_a5dc59fb217655f117354d5996afb0955"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5dc59fb217655f117354d5996afb0955">getSizeFromIndex</a> (unsigned index) const</td></tr>
<tr class="memdesc:a5dc59fb217655f117354d5996afb0955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the size of a clause from its index.  <br /></td></tr>
<tr class="separator:a5dc59fb217655f117354d5996afb0955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32559af300fbe15ceb7c26c865063786" id="r_a32559af300fbe15ceb7c26c865063786"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32559af300fbe15ceb7c26c865063786">getLbdPartitionFromIndex</a> (unsigned index) const</td></tr>
<tr class="memdesc:a32559af300fbe15ceb7c26c865063786"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the LBD partition from an index.  <br /></td></tr>
<tr class="separator:a32559af300fbe15ceb7c26c865063786"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7949bd518876af408f77262dbdee78d0" id="r_a7949bd518876af408f77262dbdee78d0"><td class="memItemLeft" align="right" valign="top"><a id="a7949bd518876af408f77262dbdee78d0" name="a7949bd518876af408f77262dbdee78d0"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_totalLiteralCapacity</b></td></tr>
<tr class="memdesc:a7949bd518876af408f77262dbdee78d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum total literal capacity of the database. <br /></td></tr>
<tr class="separator:a7949bd518876af408f77262dbdee78d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f81d560d1365163da7dfb9b2090420" id="r_a42f81d560d1365163da7dfb9b2090420"><td class="memItemLeft" align="right" valign="top"><a id="a42f81d560d1365163da7dfb9b2090420" name="a42f81d560d1365163da7dfb9b2090420"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>m_maxPartitioningLbd</b></td></tr>
<tr class="memdesc:a42f81d560d1365163da7dfb9b2090420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum LBD value for separate partitioning. <br /></td></tr>
<tr class="separator:a42f81d560d1365163da7dfb9b2090420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852c7da2616b52ed4a717a49045af8a7" id="r_a852c7da2616b52ed4a717a49045af8a7"><td class="memItemLeft" align="right" valign="top"><a id="a852c7da2616b52ed4a717a49045af8a7" name="a852c7da2616b52ed4a717a49045af8a7"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>m_maxClauseSize</b></td></tr>
<tr class="memdesc:a852c7da2616b52ed4a717a49045af8a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of clauses to be stored. <br /></td></tr>
<tr class="separator:a852c7da2616b52ed4a717a49045af8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa11b6ec35e4268a2909614435ebe443b" id="r_aa11b6ec35e4268a2909614435ebe443b"><td class="memItemLeft" align="right" valign="top"><a id="aa11b6ec35e4268a2909614435ebe443b" name="aa11b6ec35e4268a2909614435ebe443b"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>m_freeMaxSize</b></td></tr>
<tr class="memdesc:aa11b6ec35e4268a2909614435ebe443b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size for which giveSelection does not count in while filling exportBuffer. <br /></td></tr>
<tr class="separator:aa11b6ec35e4268a2909614435ebe443b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e6ff0237eaba7eb0bceda1cb1f08cb" id="r_a68e6ff0237eaba7eb0bceda1cb1f08cb"><td class="memItemLeft" align="right" valign="top"><a id="a68e6ff0237eaba7eb0bceda1cb1f08cb" name="a68e6ff0237eaba7eb0bceda1cb1f08cb"></a>
std::vector&lt; std::unique_ptr&lt; <a class="el" href="classClauseBuffer.html">ClauseBuffer</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_clauses</b></td></tr>
<tr class="memdesc:a68e6ff0237eaba7eb0bceda1cb1f08cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of clause buffers, indexed by size and LBD. <br /></td></tr>
<tr class="separator:a68e6ff0237eaba7eb0bceda1cb1f08cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab887eecaf8b8534f02611b6409283798" id="r_ab887eecaf8b8534f02611b6409283798"><td class="memItemLeft" align="right" valign="top"><a id="ab887eecaf8b8534f02611b6409283798" name="ab887eecaf8b8534f02611b6409283798"></a>
std::atomic&lt; long &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_currentLiteralSize</b></td></tr>
<tr class="memdesc:ab887eecaf8b8534f02611b6409283798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current number of literals in the database (excluding unit clauses). <br /></td></tr>
<tr class="separator:ab887eecaf8b8534f02611b6409283798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38dc0a4589fe46d95c8833e1ff2e733" id="r_ad38dc0a4589fe46d95c8833e1ff2e733"><td class="memItemLeft" align="right" valign="top"><a id="ad38dc0a4589fe46d95c8833e1ff2e733" name="ad38dc0a4589fe46d95c8833e1ff2e733"></a>
std::atomic&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_currentWorstIndex</b></td></tr>
<tr class="memdesc:ad38dc0a4589fe46d95c8833e1ff2e733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the current worst clause in the database. <br /></td></tr>
<tr class="separator:ad38dc0a4589fe46d95c8833e1ff2e733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37aaa4543975d7ce5a65ffc71f4acc87" id="r_a37aaa4543975d7ce5a65ffc71f4acc87"><td class="memItemLeft" align="right" valign="top"><a id="a37aaa4543975d7ce5a65ffc71f4acc87" name="a37aaa4543975d7ce5a65ffc71f4acc87"></a>
std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><b>m_shrinkMutex</b></td></tr>
<tr class="memdesc:a37aaa4543975d7ce5a65ffc71f4acc87"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classMutex.html" title="Mutex class.">Mutex</a> used to coordinate shrinking and clause addition. <br /></td></tr>
<tr class="separator:a37aaa4543975d7ce5a65ffc71f4acc87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b690a1f075b3bd57d33a31b4649c2a" id="r_ab7b690a1f075b3bd57d33a31b4649c2a"><td class="memItemLeft" align="right" valign="top"><a id="ab7b690a1f075b3bd57d33a31b4649c2a" name="ab7b690a1f075b3bd57d33a31b4649c2a"></a>
<a class="el" href="classClauseBuffer.html">ClauseBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_missedAdditionsBfr</b></td></tr>
<tr class="separator:ab7b690a1f075b3bd57d33a31b4649c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A clause database implementation attempting to naively mimic the Simplified Adaptive Database from Mallob (ref:https://doi.org/10.1613/jair.1.15827). </p>
<p>This class implements a clause database that organizes clauses based on their size and LBD (Literal Block Distance). It uses a vector of ClauseBuffers to store clauses, with each buffer corresponding to a specific size and LBD range. The implementation aims to provide efficient clause storage, retrieval, and management while maintaining a balance between clause quality and database size.</p>
<p>Key features:</p><ul>
<li>Clauses are partitioned based on size and LBD.</li>
<li>Supports concurrent additions with lock-free mechanisms for unit clauses.</li>
<li><p class="startli">Implements a shrinking mechanism to maintain the database size within capacity.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo</a></b></dt><dd>fix the lbd partitioning to not have empty vectors, worth it ? </dd></dl>
</li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa4d3073ea4c441b55e38e99bbedf10f7" name="aa4d3073ea4c441b55e38e99bbedf10f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d3073ea4c441b55e38e99bbedf10f7">&#9670;&#160;</a></span>ClauseDatabaseMallob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ClauseDatabaseMallob::ClauseDatabaseMallob </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>maxClauseSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>maxPartitioningLbd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>maxCapacity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>maxFreeSize</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new <a class="el" href="classClauseDatabaseMallob.html" title="A clause database implementation attempting to naively mimic the Simplified Adaptive Database from Ma...">ClauseDatabaseMallob</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxClauseSize</td><td>Maximum size of clauses to be stored. </td></tr>
    <tr><td class="paramname">maxPartitioningLbd</td><td>Maximum LBD value for separate partitioning. </td></tr>
    <tr><td class="paramname">maxCapacity</td><td>Maximum total literal capacity of the database. </td></tr>
    <tr><td class="paramname">maxFreeSize</td><td>Maximum size for which giveSelection does not decrement the literal count while filling the export buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if any parameter is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4327df1c5f91889d5881d5834eee563e" name="a4327df1c5f91889d5881d5834eee563e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4327df1c5f91889d5881d5834eee563e">&#9670;&#160;</a></span>addClause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ClauseDatabaseMallob::addClause </td>
          <td>(</td>
          <td class="paramtype">ClauseExchangePtr</td>          <td class="paramname"><span class="paramname"><em>clause</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a clause to the database. </p>
<p>This method attempts to add a clause to the appropriate buffer based on its size and LBD. It uses shared locks for synchronizing the m_currentLiteralCounts and the other class atributes with shrinkDatabase. Units are always added, capacity is ignored for them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clause</td><td>pointer to the clause to be added. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the clause was successfully added, false otherwise. </dd></dl>

<p>Implements <a class="el" href="classClauseDatabase.html#a4d25e6fa03efabaa1011920fc0ea5573">ClauseDatabase</a>.</p>

</div>
</div>
<a id="af8d180394878ab39c7c79f55e8b785db" name="af8d180394878ab39c7c79f55e8b785db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d180394878ab39c7c79f55e8b785db">&#9670;&#160;</a></span>clearDatabase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ClauseDatabaseMallob::clearDatabase </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears all clauses from the database and resets internal counters. </p>

<p>Implements <a class="el" href="classClauseDatabase.html#a843082a87681cabc9bd6d2ebbeb7bf44">ClauseDatabase</a>.</p>

</div>
</div>
<a id="a220775dedc397f17bd7a29a8b10b8e62" name="a220775dedc397f17bd7a29a8b10b8e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a220775dedc397f17bd7a29a8b10b8e62">&#9670;&#160;</a></span>getClauses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ClauseDatabaseMallob::getClauses </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; ClauseExchangePtr &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>v_cls</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fills a buffer with all clauses in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v_cls</td><td>Vector to be filled with all clauses. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classClauseDatabase.html#a57206812d6df9a47f97a9f5c4d5a9f82">ClauseDatabase</a>.</p>

</div>
</div>
<a id="a5c07a43ccb333e766331e4d17ac00c24" name="a5c07a43ccb333e766331e4d17ac00c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c07a43ccb333e766331e4d17ac00c24">&#9670;&#160;</a></span>getIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned ClauseDatabaseMallob::getIndex </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>lbd</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the index for a clause based on its size and LBD. </p>
<p>This function computes an index in the clauses vector based on the clause's size and LBD. It uses m_maxPartitioningLbd to determine the partitioning of LBD values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size of the clause (must be &gt;= UNIT_SIZE). </td></tr>
    <tr><td class="paramname">lbd</td><td>LBD (Literal Block Distance) of the clause (must be &gt;= MIN_LBD). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index in the clauses vector. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if size is less than UNIT_SIZE or lbd is less than MIN_LBD.</td></tr>
  </table>
  </dd>
</dl>
<p>Index calculation:</p><ul>
<li>For each size, there are m_maxPartitioningLbd possible indices.</li>
<li>LBD values &gt;= (MIN_LBD + m_maxPartitioningLbd) are grouped together in the last partition.</li>
</ul>
<p>Example (assuming m_maxPartitioningLbd == 2):</p><ul>
<li>idx 0: size = 1, lbd = 2</li>
<li>idx 1: size = 1, lbd &gt;= 3 (never used)</li>
<li>idx 2: size = 2, lbd = 2</li>
<li>idx 3: size = 2, lbd &gt;= 3 (never used)</li>
<li>idx 4: size = 3, lbd = 2</li>
<li>idx 5: size = 3, lbd &gt;= 3 ... </li>
</ul>

</div>
</div>
<a id="a32559af300fbe15ceb7c26c865063786" name="a32559af300fbe15ceb7c26c865063786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32559af300fbe15ceb7c26c865063786">&#9670;&#160;</a></span>getLbdPartitionFromIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ClauseDatabaseMallob::getLbdPartitionFromIndex </td>
          <td>(</td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>index</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the LBD partition from an index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index in the clauses vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>LBD partition. </dd></dl>

</div>
</div>
<a id="a8f550c70b621abd473d9721107d2f709" name="a8f550c70b621abd473d9721107d2f709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f550c70b621abd473d9721107d2f709">&#9670;&#160;</a></span>getOneClause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ClauseDatabaseMallob::getOneClause </td>
          <td>(</td>
          <td class="paramtype">ClauseExchangePtr &amp;</td>          <td class="paramname"><span class="paramname"><em>cls</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a single clause from the best (smallest index) buffer possible. </p>
<p>This method attempts to retrieve a clause from any non-empty buffer in the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cls</td><td>Reference to store the retrieved clause. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a clause was found, false if the database is empty. </dd></dl>

<p>Implements <a class="el" href="classClauseDatabase.html#a913ac1a1f391ba55da6d99f72f38da05">ClauseDatabase</a>.</p>

</div>
</div>
<a id="a1807f4379bd4fbf9853ec56b0ff6d369" name="a1807f4379bd4fbf9853ec56b0ff6d369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1807f4379bd4fbf9853ec56b0ff6d369">&#9670;&#160;</a></span>getSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ClauseDatabaseMallob::getSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the total number of clauses in the database. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of clauses in the database. </dd></dl>

<p>Implements <a class="el" href="classClauseDatabase.html#a90c045c33bf4050791adf412cd2a9981">ClauseDatabase</a>.</p>

</div>
</div>
<a id="a5dc59fb217655f117354d5996afb0955" name="a5dc59fb217655f117354d5996afb0955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dc59fb217655f117354d5996afb0955">&#9670;&#160;</a></span>getSizeFromIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ClauseDatabaseMallob::getSizeFromIndex </td>
          <td>(</td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>index</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the size of a clause from its index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index in the clauses vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Size of the clause. </dd></dl>

</div>
</div>
<a id="aa6130cd4e93a88c641163bc52f2b8d9b" name="aa6130cd4e93a88c641163bc52f2b8d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6130cd4e93a88c641163bc52f2b8d9b">&#9670;&#160;</a></span>giveSelection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ClauseDatabaseMallob::giveSelection </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; ClauseExchangePtr &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>selectedCls</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>literalCountLimit</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fills a buffer with selected clauses up to a given size limit. </p>
<p>This method selects clauses from the database, prioritizing unit clauses and then iterating through the clause buffers to fill the selection up to the specified limit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selectedCls</td><td>Vector to be filled with selected clauses. </td></tr>
    <tr><td class="paramname">literalCountLimit</td><td>Maximum number of literals to select. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of literals in the selected clauses. </dd></dl>

<p>Implements <a class="el" href="classClauseDatabase.html#af351d9ca90de1baef43070bbd8f615cc">ClauseDatabase</a>.</p>

</div>
</div>
<a id="a1e2b3de1c79cd19881545a6465ab23eb" name="a1e2b3de1c79cd19881545a6465ab23eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e2b3de1c79cd19881545a6465ab23eb">&#9670;&#160;</a></span>shrinkDatabase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ClauseDatabaseMallob::shrinkDatabase </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shrinks the database by removing clauses to maintain the size within capacity. </p>
<p>This method removes clauses from the worst (highest index) buffers until the database size is within the specified capacity. However it starts by adding missed clauses addition due to the previous shrink unique_lock. Unit clauses are never removed</p>
<dl class="section return"><dt>Returns</dt><dd>Number of clauses removed during shrinking. </dd></dl>

<p>Implements <a class="el" href="classClauseDatabase.html#a7047a3d8094c37cc9097d633cb6c91ca">ClauseDatabase</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/src/containers/<a class="el" href="ClauseDatabaseMallob_8hpp_source.html">ClauseDatabaseMallob.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<img class="footer" src="./p-logo.png"/>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
Doxygen Theme by&#160;<a href="https://github.com/jothepro/doxygen-awesome-css">doxygen-awesome</a>
</small></address>
</div><!-- doc-content -->
</body>
</html>
